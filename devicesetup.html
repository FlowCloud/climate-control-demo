<!DOCTYPE html>
<html lang="en">
<head>
	<title>Climate Control Demo</title>
	<meta charset="UTF-8" />
	<link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" type="image/png" href="./images/img-icon.png">
</head>

<body>
	<div id="GlobalHeaderContainer">
		<div id="GlobalHeader">
			<div class="logo">
				<a href="http://flow.imgtec.com/developers" target="_blank"><img src="./images/flowcloud_logo.png" width="90%" height="90%" /></a>
            </div>
			<div class="sitetitle">Climate Control Demo</div>
		</div>
	</div>
	<div id="NavContainer">
		<nav>
			<div class="navlink">
				<a href="index.html">Home</a>
			</div>
			<div class="navlink">
				<a href="requirements.html">Requirements</a>
			</div>	
			<div class="navlink">
				<a href="devicesetup.html" class="current">Device Setup</a>
			</div>
			<div class="navlink">
				<a href="starting_the_system.html">Starting the System</a>
			</div>
			<div class="navlink">
				<a href="sourcecode.html">Source Code</a>
			</div>
			<div class="navlink">
				<a href="reference.html">Reference</a>
			</div>
		</nav>
	</div>
	
	
    <div class="content">
    		<br/><br/>
    	<h1>Device Setup</h1>
    	<p>
    		This section contains all the steps required to get the devices (and Linux platform) set up for the Climate Control Demo System. 
    		You will need to download the climate-control-demo-1.0.0 release from
    		<a href="https://github.com/FlowCloud/climate-control-demo/releases" target="_blank">here</a>. You will need the files on Ci20, your Linux platform and your Windows platform (if you are using Windows for MPLAB X). <br/><br/>
    		 After extracting the climate-control-demo-1.0.0.zip , you will see 3 folders:
    	</p>
    	
    	<ol>
    		<li>ci20 - Controller binaries for Ci20 and linux PC<br/>&nbsp;
    			<ul>
    				<li>flowclimatecontroller.i686.bin - controller binary for 32bit linux PC.</li>
    				<li>flowclimatecontroller.mipsel.bin - controller binary for Ci20 board.</li>
    				<li>flowclimatecontroller.x86_64.bin - controller binary for 64bit linux PC.</li>
    			</ul><br/>
    		</li>
    		<li>pc_app - Python-QT Admin and Display Applications<br/>&nbsp;</li>
    		<li>wifire - Sensor and Actuator hex files to be run on Wi-Fire board<br/>&nbsp;
    			<ul>
    				<li>Sensor hex file for Wi-Fire board - flow_climate_sensor.X.production.hex</li>
    				<li>Actuator hex file for Wi-Fire board - flow_climate_actuator.X.production.hex</li>
    			</ul>
    			<br/>
    		</li>
    	</ol>
    	
    	<h2>Setting up Wi-Fire boards</h2>
		<h3>Powering your Wi-Fire board</h3>
	    <p>
	    	Connect your Wi-Fire board to a PC or laptop computer with a USB cable, unless your application uses more than 300 mA, 
	    	in which case you should use an external power supply rated at 5V DC, 500 mA. Follow the instructions below to power up your board 
	    	using either a USB cable, or external power supply
	    </p>
	    
	    <h4>Using a USB cable</h4>
	    <ul>
	    	<li>Use Jumper J16 (C) to select the USB cable (UART) power source.</li>
	    	<li>Connect the Wi-Fire's USB mini B connector (B) to your computer's USB port.</li>
	    </ul>
	    
	    <h4>Using a 5V 500 mA power supply</h4>
	    <ul>
	    	<li>Use Jumper J16 (C) to select the 'EXT' power source.</li>
	    	<li>Connect the power supply to Wi-Fire's 5V DC power connector (A).</li>
	    </ul>
		<h3>Flashing the Wi-Fire board</h3>
		<h4>Using hex files</h4>
		
			
			Please download and install necessary tools and SDK from 
			<a href="http://flow.imgtec.com/developers/develop/embedded/pic32mz-free-rtos/downloads" target="_blank">here</a>&nbsp;-
			You will need MPLAB X IDE, MPLAB XC32 Compiler and MPLAB Harmony from the Tools section. You will also need "WiFire Harmony SDK 2.0.2" release 
          	and the "WiFire Harmony SDK Developer getting Started Guide" from the documentation section. The documentation details how to install the Harmony SDK.<br><br> 
		<ul>	 
			 <li>Connect your programming tool to your PC and to the Wi-Fire board via the connector shown in the images <a href="http://flow.imgtec.com/developers/help/wifire/intro#update-software">here</a>.</li>
			 <li>Open the MPLAB X IPE.</li>
			 <li>Set the Device field to PIC32MZ2048ECG100.</li>
			 <li>Click "Connect" to ensure that the IPE and Wi-Fire board can communicate.</li>
			 <li>Click "Browse" and select a hex file you downloaded earlier as a source.</li>
			 <li>Click "Program" to flash the board with the chosen hex file.</li>
			 <li>Flash one board with the actuator file and one with the sensor file. Note down which board is which,
			 or connect the sensors and relays to the correct board as detailed in <a href="starting_the_system.html">Starting the System</a> before returning to this page.</li>
		</ul>
		<h4>Using source code</h4>
		<p>Please follow the instructions in the <a href="sourcecode.html">Source Code</a> section.</p>
		
		<h2>Setting up Ci20</h2>
		<h3>Installing flow libraries on Ci20 board</h3>
		<p>
			To install the Ci20 flow libraries, login to Ci20 board and connect to the internet (via WiFi or Ethernet). 
            The default username and password are both Ci20. For more details on Ci20 please refer to 
            <a href="http://flow.imgtec.com/developers/help/ci20/setup" target="_blank">Ci20 Setup</a>).
            To get latest release of flowsdk, please enter the following on your Ci20 terminal.		
		</p>
		
		<h3>Updating Flow libraries</h3>
		<div class="c-cmd-line">
			#cd /etc/apt/sources.list.d/<br/>
			#sudo wget <a href="http://deb.flowworld.com/flowsdk.list" target="_blank">http://deb.flowworld.com/flowsdk.list</a><br/>
			#sudo apt-get update<br/>
			#sudo apt-get install libflowmessaging-devel libflowcore-devel						
		</div>
		
		<h3>Installing flowclimatecontroller on Ci20 board</h3>
		<p>To get latest public release of flowclimatecontroller.</p>
		<div class="c-cmd-line">
			#cd /etc/apt/sources.list.d/<br/>
			#sudo wget <a href="http://deb.flowworld.com/flowsdk.list" target="_blank">http://deb.flowworld.com/flowsdk.list</a><br/>
			#sudo apt-get update<br/>
			#sudo apt-get install flowclimatecontroller						
		</div>
		<p><span class="q-bold">Note that these instructions can also be followed on a Linux PC if you prefer.</span></p>		
		
		
		<h2>Setting up Linux PC for the Admin and Display apps</h2>
		<h3>Installing flow libraries and python wrappers on linux PC</h3>
		<p>
			To install the flow libraries and python wrappers on linux PC, login to ubuntu machine with sudo access. 
			To get latest public release of flowsdk, please enter the following in your linux terminal.
		</p>
		
		<h3>Updating Flow libraries along with python wrappers</h3>
		<div class="c-cmd-line">
			#cd /etc/apt/sources.list.d/<br/>
			#sudo wget <a href="http://deb.flowworld.com/flowsdk.list" target="_blank">http://deb.flowworld.com/flowsdk.list</a><br/>
			#sudo apt-get update<br/>
			#sudo apt-get install libflowmessaging-devel libflowcore-devel<br/>
			#sudo apt-get install libflowmessaging-python<br/>
			#sudo apt-get install libflowcore-python
		</div>	
		
		<h3>Installing required python packages for Display and Admin applications</h3>
		<p>
			To install the required python packages on linux PC, login to ubuntu machine with sudo access. 
			In order to run the QT based Display and Admin python applications, following packages need to be installed on the linux machine.
		</p>
		<div class="c-cmd-line">
			#sudo apt-get install python2.7<br/>
			#sudo apt-get install python-pyside<br/>
			#sudo apt-get install python-matplotlib<br/>
			#sudo apt-get install python-netifaces<br/>
			#sudo apt-get install python-pip<br/>
			#sudo pip install xmltodict<br/>
			#sudo pip install enum34<br/>
			#sudo apt-get install gawk<br/>
		</div>	
		  	
    </div>
    
    
    
    
    
   <p>&nbsp;<br/><br/><br/><br/><p>
	<div id="FooterMainContainer">
		<div id="FooterContainer">
			<div class="footerlogo">
				<a href="http://www.imgtec.com" target="_blank"><img src="./images/img-footer-logo-grey.png" width="100%" height="100%" /></a>
			</div>
			<div class="copyright">&copy; Imagination Technologies Limited<br> All rights reserved</div>
		</div>
	</div>
</body>

</html>    